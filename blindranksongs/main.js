const songs = [{"albumTitle":"Section 80","albumSongs":["ADHD","Chapter Six","Rigamortus","Blow My High","HiiiPower"]},{"albumTitle":"good kid, m.A.A.d city","albumSongs":["Bitch Dont Kill My Vibe","Backseat Freestyle","Money Trees","Poetic Justice","m.A.A.d city","Sing About Me Im Dying Of Thirst","The Recipe"]},{"albumTitle":"To Pimp A Butterfly","albumSongs":["Wesleys Theory","King Kunta","Alright","i"]},{"albumTitle":"DAMN","albumSongs":["DNA.","LOYALTY.","PRIDE.","HUMBLE.","LOVE.","DUCKWORTH."]},{"albumTitle":"Mr. Morale And The Big Steppers","albumSongs":["N95","Die Hard","Father Time","Count Me Out","Silent Hill"]},{"albumTitle":"GNX","albumSongs":["squabble Up","luther","tv fff","peakaboo","heart pt. 6"]},{"albumTitle":"The College Dropout","albumSongs":["All Falls Down","Jesus Walks","Slow Jamz","Through The Wire","Family Business"]},{"albumTitle":"Late Registration","albumSongs":["Heard Em Say","Touch The Sky","Gold Digger","Hey Mama"]},{"albumTitle":"Graduation","albumSongs":["Good Morning","Champion","Stronger","I Wonder","Good Life","Cant Tell Me Nothing","Flashing Lights","Homecoming"]},{"albumTitle":"808s And Heartbreak","albumSongs":["Heartless"]},{"albumTitle":"My Beautiful Dark Twisted Fantasy","albumSongs":["Dark Fantasy","POWER","All Of The Lights","Devil In A New Dress","Runaway"]},{"albumTitle":"Watch The Throne","albumSongs":["Ni**as In Paris"]},{"albumTitle":"Yeezus","albumSongs":["On Sight","Bound 2"]},{"albumTitle":"The Life Of Pablo","albumSongs":["Ultralight Beam","Father Stretch My Hands Pt. 1","Famous","No More Parties In LA","Saint Pablo"]},{"albumTitle":"ye","albumSongs":["Ghost Town","Violent Crimes"]},{"albumTitle":"Donda","albumSongs":["Praise God","Off The Grid","Believe What I Say","Moon","Life Of The Party"]},{"albumTitle":"Vultures 1","albumSongs":["Burn","Carnival"]},{"albumTitle":"Vultures 2","albumSongs":["Field Trip","530","River"]},{"albumTitle":"Rodeo","albumSongs":["90210","Antidote","Nightcrawler"]},{"albumTitle":"Birds In The Trap Sing Mcknight","albumSongs":["goosebumps","sdp interlude","pick up the phone"]},{"albumTitle":"ASTROWORLD","albumSongs":["STARGAZING","SICKO MODE","SKELETONS","5% TINT","ASTROTHUNDER","YOSEMITE","CANT SAY","BUTTERFLY EFFECT"]},{"albumTitle":"UTOPIA","albumSongs":["THANK GOD","MY EYES","MELTDOWN","I KNOW?","FEIN","TELEKINESIS"]},{"albumTitle":"Not All Heroes Wear Capes","albumSongs":["Overdue","Space Cadet"]},{"albumTitle":"Heroes And Villains","albumSongs":["Superhero","Trance","Creepin","Feel The Fiyaaaah"]},{"albumTitle":"I Am > I Was","albumSongs":["A Lot","Ball W/o You"]},{"albumTitle":"Without Warning","albumSongs":["Ric Flair Drip"]},{"albumTitle":"American Dream","albumSongs":["redrum","nee-nah"]},{"albumTitle":"Savage Mode","albumSongs":["No Heart"]},{"albumTitle":"Savage Mode II","albumSongs":["Glock In My Lap","Runnin"]},{"albumTitle":"So Far Gone","albumSongs":["Best I Ever Had"]},{"albumTitle":"Take Care","albumSongs":["Headlines","Take Care","Marvins Room"]},{"albumTitle":"Nothing Was The Same","albumSongs":["Started From The Bottonm","Hold On, We're Going Home"]},{"albumTitle":"Views","albumSongs":["Feel No Ways","Controlla","One Dance","Too Good","Hotline Bling"]},{"albumTitle":"More Life","albumSongs":["Passionfruit","Portland","Fake Love","Do Not Disturb"]},{"albumTitle":"Scorpion","albumSongs":["Nonstop","God's Plan","Nice For What","In My Feelings"]},{"albumTitle":"Dark Lane Demo Tapes","albumSongs":["Toosie Slide"]},{"albumTitle":"Certified Lover Boy","albumSongs":["Fair Trade","Knife Talk","Way 2 Sexy"]},{"albumTitle":"Honestly Nevermind","albumSongs":["Jimmy Cooks"]},{"albumTitle":"Her Loss","albumSongs":["Rich Flex","Spin Bout U"]},{"albumTitle":"For All The Dogs","albumSongs":["First Person Shooter","Rich Baby Daddy","Virginia Beach"]},{"albumTitle":"$ome $exy $ongs 4 U","albumSongs":["NOKIA","GIMME A HUG","MEET YOUR PADRE"]},{"albumTitle":"Born Sinner","albumSongs":["Power Trip","She Knows"]},{"albumTitle":"2014 Forest Hills Drive","albumSongs":["Wet Dreamz","No Role Modelz","Love Yourz"]},{"albumTitle":"Luv Is Rage 2","albumSongs":["The Way Life Goes","Neon Guts","XO Tour Llif3"]},{"albumTitle":"Eternal Atake","albumSongs":["Silly Watch"]},{"albumTitle":"Die For My Bitch","albumSongs":["ORANGE SODA","HONEST"]},{"albumTitle":"The Melodic Blue","albumSongs":["family ties","16"]},{"albumTitle":"Playboi Carti","albumSongs":["Magnolia","wokeuplikethis*"]},{"albumTitle":"Die Lit","albumSongs":["Long Time - Intro","RIP","Shoota"]},{"albumTitle":"Whole Lotta Red","albumSongs":["Sky","ILoveUIHateU"]},{"albumTitle":"I Am Music","albumSongs":["EVIL J0RDAN","GOOD CREDIT"]},{"albumTitle":"I Never Liked You","albumSongs":["WAIT FOR U","PUFFIN ON ZOOTIEZ"]},{"albumTitle":"We Dont Trust You","albumSongs":["Like That","Type Shit"]},{"albumTitle":"Long Live A$AP","albumSongs":["Fuckin' Problems","Fashion Killa"]},{"albumTitle":"At Long Last A$AP","albumSongs":["Jukebox Joints","LSD"]},{"albumTitle":"TESTING","albumSongs":["Praise The Lord"]},{"albumTitle":"Melt My Eyez See Your Future","albumSongs":["X-Wing","Walkin"]},{"albumTitle":"Goblin","albumSongs":["Yonkers","She"]},{"albumTitle":"Flower Boy","albumSongs":["See You Again","911/Mr. Lonely"]},{"albumTitle":"IGOR","albumSongs":["EARFQUAKE","I THINK","NEW MAGIC WAND","ARE WE STILL FRIENDS?"]},{"albumTitle":"Call Me If You Get Lost","albumSongs":["WUSYANAME","SWEET/I THOUGHT YOU WANTED TO DANCE"]},{"albumTitle":"CHROMAKOPIA","albumSongs":["St. Chroma","Darling I","Like Him","Sticky"]},{"albumTitle":"Gemini Rights","albumSongs":["Static","Bad Habit"]},{"albumTitle":"Steve Lacy","albumSongs":["Ryd","Dark Red","Some","Uuuu","Infrunami","C U Girl"]},{"albumTitle":"Channel Orange","albumSongs":["Thinkin Bout You","Super Rich Kids","Lost"]},{"albumTitle":"Blonde","albumSongs":["Nikes","Ivy","Pink + White","Self Control","Nights","White Ferrari","Seigfried","Godspeed"]},{"albumTitle":"Swimming","albumSongs":["Come Back To Earth","Self Care","Small Worlds"]},{"albumTitle":"Stankonia","albumSongs":["Ms Jackson","So Fresh, So Clean"]},{"albumTitle":"Speakerboxx/the Love Below","albumSongs":["Hey Ya"]},{"albumTitle":"The Blueprint 3","albumSongs":["Empire State Of Mind"]},{"albumTitle":"Hardstone Psycho","albumSongs":["TORE UP","BANDIT","NEW DROP"]},{"albumTitle":"Love Sick","albumSongs":["No Pole"]},{"albumTitle":"The Forever Story","albumSongs":["Surround Sound"]},{"albumTitle":"2001","albumSongs":["Still Dre","The Next Episode","Forgot About Dre"]},{"albumTitle":"CTRL","albumSongs":["Love Galore","Doves In The Wind","Broken Clocks"]},{"albumTitle":"SOS","albumSongs":["Kill Bill","Snooze","Nobody Gets Me","Open Arms","Good Days"]},{"albumTitle":"Hurry Up Tomorrow","albumSongs":["Timeless"]},{"albumTitle":"MM..Food","albumSongs":["One Beer","Rapp Snitch Knishes"]},{"albumTitle":"Operation Doomsday","albumSongs":["Doomsday"]},{"albumTitle":"Freudian","albumSongs":["Get You","Best Part"]},{"albumTitle":"Get Rich Or Die Tryin","albumSongs":["In Da Club","Many Men"]},{"albumTitle":"Ready To Die","albumSongs":["Big Poppa","Hypnotize"]},{"albumTitle":"Trapsoul","albumSongs":["Dont","Right My Wrongs","Exchange"]},{"albumTitle":"Acid Rap","albumSongs":["Cocoa Butter Kisses"]},{"albumTitle":"Finally Rich","albumSongs":["Love Sosa"]},{"albumTitle":"Because The Internet","albumSongs":["3005"]},{"albumTitle":"Awaken My Love","albumSongs":["Redbone"]},{"albumTitle":"Alligator Bites Never Heal","albumSongs":["Denial Is A River"]},{"albumTitle":"Fetty Wap","albumSongs":["Again","Trap Queen"]},{"albumTitle":"A Gift And A Curse","albumSongs":["fukumean"]},{"albumTitle":"Y2k!","albumSongs":["Did It First"]},{"albumTitle":"Goodbye And Good Riddance","albumSongs":["All Girls Are The Same","Lucid Dreams"]},{"albumTitle":"Legends Never Die","albumSongs":["Come And Go","Wishing Well"]},{"albumTitle":"A Great Chaos","albumSongs":["Fighting My Demons"]},{"albumTitle":"Man On The Moon","albumSongs":["Day N Nite","Pursuit Of Happiness"]},{"albumTitle":"The Miseducation Of Lauryn Hill","albumSongs":["Ex-Factor","Doo Wop"]},{"albumTitle":"Almost Healed","albumSongs":["All My Life"]},{"albumTitle":"Young Genius","albumSongs":["Mathematical Disrespect","Mr. Take Ya Bitch"]},{"albumTitle":"Montero","albumSongs":["Call Me By Your Name","Industry Baby","Thats What I Want"]},{"albumTitle":"Lets Start Here","albumSongs":["Drive Me Crazy"]},{"albumTitle":"Megan","albumSongs":["Mamushi"]},{"albumTitle":"Top Shotta","albumSongs":["Shotta Flow"]},{"albumTitle":"Illmatic","albumSongs":["NY State Of Mind"]},{"albumTitle":"In Sexyy We Trust","albumSongs":["Get It Sexyy"]},{"albumTitle":"Hood Hottest Princess","albumSongs":["Skeeyee"]},{"albumTitle":"After Hours","albumSongs":["Heartless","Blinding Lights","In Your Eyes","Save Your Tears"]},{"albumTitle":"Beauty Behind The Madness","albumSongs":["Often","The Hills","Cant Feel My Face"]},{"albumTitle":"2093","albumSongs":["Breathe","If We Being Real"]}]

function removeDuplicates(arr) {
    const nonRepeatingArray = [];

    arr.forEach(item => {
        if (!nonRepeatingArray.includes(item)) {
            nonRepeatingArray.push(item);
        }
    });

    return nonRepeatingArray;
}

function chooseRandomSongs() {
    randSongs = []
    randomSongIndex = []

    for(i=0;i<5;i++) {
        randAlbum = Math.floor(Math.random() * 108)
        randSong = Math.floor(Math.random() * songs[randAlbum].albumSongs.length)
        randomSongIndex.push(randAlbum + '.' + randSong)
    }

    randomSongIndex = removeDuplicates(randomSongIndex)

    while(removeDuplicates(randomSongIndex).length !== 5) {
        randAlbum = Math.floor(Math.random() * 108)
        randSong = Math.floor(Math.random() * songs[randAlbum].albumSongs.length)
        randomSongIndex.push(randAlbum + '.' + randSong)
    }

    for(j=0;j<5;j++) {
        songArray = randomSongIndex[j].split('.')
        randSongs.push(songs[songArray[0]].albumSongs[songArray[1]])
    }

    return [randSongs, randomSongIndex]
}

const randomSongs = chooseRandomSongs()

console.log(randomSongs)

let currentIndex = []

function nameToFile(name) {
    songArray = name.split('.')
    finalName = songs[songArray[0]].albumTitle.toLowerCase().split(' ').join('')
    console.log(finalName.replace(/[^\w\s]/gi, ''))
    return finalName.replace(/[^\w\s]/gi, '')
}

const name1 = document.getElementById('name1')
const name2 = document.getElementById('name2')
const name3 = document.getElementById('name3')
const name4 = document.getElementById('name4')
const name5 = document.getElementById('name5')

const pic1 = document.getElementById('pic1')
const pic2 = document.getElementById('pic2')
const pic3 = document.getElementById('pic3')
const pic4 = document.getElementById('pic4')
const pic5 = document.getElementById('pic5')

const pickName = document.getElementById('pickName')
const pick = document.getElementById('pick')

pickName.textContent = randomSongs[0][0]
pick.src = './assets/' + nameToFile(randomSongs[1][0]) + '.webp'

pick.addEventListener('dragstart', (e) => {
    pick.classList.add('dragging')
})

pick.addEventListener('dragend', (e) => {
    pick.classList.remove('dragging')
})

const but1 = document.getElementById('but1')
const but2 = document.getElementById('but2')
const but3 = document.getElementById('but3')
const but4 = document.getElementById('but4')
const but5 = document.getElementById('but5')

const buts = document.getElementsByClassName('but')
Array.from(buts).forEach(but => {
    but.addEventListener('click', (e) => {
        if(!but.getAttribute('pressed')) {
            butNum = but.id.split('')[3]
            document.getElementById('pic'+ butNum).src = './assets/' + nameToFile(randomSongs[1][currentIndex.length]) + '.webp'
            document.getElementById('name' +butNum).textContent = pickName.textContent
    
            currentIndex.push('boiii')
    
            if(currentIndex.length == 5) {
                pickName.textContent = 'Play Again'
                pick.src = './assets/replay.png'
                pick.style = 'border: none; cursor: pointer;'
                pickName.style = 'cursor: pointer;'
                pickName.addEventListener('click', (e) => {
                    location.reload()
                })
                pick.addEventListener('click', (e) => {
                    location.reload()
                })
            } else {
                pickName.textContent = randomSongs[0][currentIndex.length]
                pick.src = './assets/' + nameToFile(randomSongs[1][currentIndex.length]) + '.webp'
            }
            
            but.style = 'filter: none; transform: translate(0.4vh, 0.4vh)'
            but.setAttribute('pressed', true)
        }

    })
})

const containers = document.querySelectorAll('.pic')
containers.forEach(container => {
    container.addEventListener('dragover', (e) => {
        e.preventDefault()
    })

    container.addEventListener('drop', (e) => {
        e.preventDefault()
        const draggable = document.querySelector('.dragging')
        if (!document.getElementById('but' + container.id.split('')[3]).getAttribute('pressed')) {
            container.src = draggable.src
        
            currentIndex.push('boiii')

            if(currentIndex.length == 5) {
                document.getElementById('name' + container.id.split('')[3]).textContent = pickName.textContent
                pickName.textContent = 'Play Again'
                pick.src = './assets/replay.png'
                pick.style = 'border: none; cursor: pointer;'
                pickName.style = 'cursor: pointer;'
                pickName.addEventListener('click', (e) => {
                    location.reload()
                })
                pick.addEventListener('click', (e) => {
                    location.reload()
                })
            } else {
                document.getElementById('name' + container.id.split('')[3]).textContent = pickName.textContent
                pickName.textContent = randomSongs[0][currentIndex.length]
                pick.src = './assets/' + nameToFile(randomSongs[1][currentIndex.length]) + '.webp'
                
            }
            document.getElementById('but' + container.id.split('')[3]).setAttribute('pressed', true)
            document.getElementById('but' + container.id.split('')[3]).style = 'filter: none; transform: translate(0.4vh, 0.4vh)'
        }
    })
})